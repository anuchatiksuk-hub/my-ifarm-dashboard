<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wedding Invitation</title>
    <meta name="theme-color" content="#2d4a35">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;1,300;1,400&family=Playfair+Display:ital,wght@1,700&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        body, html { height: 100%; overflow: hidden; background: #1a2e22; font-family: 'Cormorant Garamond', serif; }

        /* ===== SPLASH ===== */
        #splash {
            position: fixed; inset: 0; z-index: 9999;
            background: linear-gradient(160deg, #1a2e22 0%, #2d4a35 50%, #1a2e22 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; -webkit-tap-highlight-color: transparent;
        }
        #splash::before {
            content: ''; position: absolute; inset: 0;
            background:
                radial-gradient(ellipse 60% 50% at 20% 25%, rgba(168,197,160,0.15) 0%, transparent 70%),
                radial-gradient(ellipse 50% 40% at 80% 70%, rgba(184,217,176,0.10) 0%, transparent 70%);
            animation: orbShift 7s ease-in-out infinite alternate;
        }
        @keyframes orbShift { 0% { opacity:0.6; transform:scale(1); } 100% { opacity:1; transform:scale(1.1); } }
        #splash::after {
            content: ''; position: absolute; inset: 0; pointer-events: none;
            background-image: repeating-linear-gradient(45deg, rgba(168,197,160,0.03) 0px, rgba(168,197,160,0.03) 1px, transparent 1px, transparent 28px);
        }

        .corner { position: absolute; width: 60px; height: 60px; opacity: 0.4; }
        .corner.tl { top:20px; left:20px;   border-top:1.5px solid #a8c5a0; border-left:1.5px solid #a8c5a0; }
        .corner.tr { top:20px; right:20px;  border-top:1.5px solid #a8c5a0; border-right:1.5px solid #a8c5a0; }
        .corner.bl { bottom:20px; left:20px;  border-bottom:1.5px solid #a8c5a0; border-left:1.5px solid #a8c5a0; }
        .corner.br { bottom:20px; right:20px; border-bottom:1.5px solid #a8c5a0; border-right:1.5px solid #a8c5a0; }

        .leaf { position:absolute; border-radius:60% 5% 60% 5%; animation:leafFloat linear infinite; pointer-events:none; }
        @keyframes leafFloat {
            from { transform:translateY(-20px) rotate(0deg); opacity:0; }
            8% { opacity:0.2; } 88% { opacity:0.2; }
            to { transform:translateY(105vh) rotate(360deg); opacity:0; }
        }
        .sparkle { position:absolute; border-radius:50%; background:#c8e6c0; animation:sparklePulse 3s ease-in-out infinite; }
        @keyframes sparklePulse { 0%,100%{opacity:0;transform:scale(0.5);} 50%{opacity:0.7;transform:scale(1.4);} }

        .splash-content {
            position:relative; z-index:2; display:flex; flex-direction:column; align-items:center;
            animation:contentFloat 5s ease-in-out infinite;
        }
        @keyframes contentFloat { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-8px);} }

        .envelope-icon { width:100px; height:72px; margin-bottom:28px; filter:drop-shadow(0 12px 30px rgba(40,80,50,0.5)); }

        .splash-eyebrow { font-size:0.78rem; letter-spacing:6px; text-transform:uppercase; color:rgba(168,197,160,0.65); font-weight:300; margin-bottom:14px; }

        .splash-names {
            font-family:'Playfair Display',serif; font-size:clamp(2.4rem,8vw,3.2rem); font-style:italic; font-weight:700;
            letter-spacing:2px; line-height:1.1; margin-bottom:10px;
            background:linear-gradient(105deg,#a8c5a0 0%,#e8f5e4 35%,#fff 50%,#e8f5e4 65%,#a8c5a0 100%);
            background-size:300% auto; background-clip:text; -webkit-background-clip:text; -webkit-text-fill-color:transparent;
            animation:nameShimmer 5s linear infinite; filter:drop-shadow(0 2px 8px rgba(168,197,160,0.5));
        }
        @keyframes nameShimmer { 0%{background-position:-100% center;} 100%{background-position:200% center;} }

        .splash-date { font-size:0.9rem; color:rgba(168,197,160,0.6); letter-spacing:2px; font-weight:300; margin-bottom:48px; text-align:center; padding:0 24px; }

        .splash-btn { display:flex; flex-direction:column; align-items:center; gap:12px; animation:btnPulse 3s ease-in-out infinite; }
        @keyframes btnPulse { 0%,100%{opacity:0.5;transform:translateY(0);} 50%{opacity:1;transform:translateY(-5px);} }

        .btn-ring {
            width:56px; height:56px; border:2px solid rgba(168,197,160,0.6); border-radius:50%;
            display:flex; align-items:center; justify-content:center; position:relative;
        }
        .btn-ring::before { content:''; position:absolute; inset:-8px; border:1px solid rgba(168,197,160,0.25); border-radius:50%; animation:ringExpand 3s ease-out infinite; }
        .btn-ring::after  { content:''; position:absolute; inset:-18px; border:1px solid rgba(168,197,160,0.1);  border-radius:50%; animation:ringExpand 3s ease-out infinite; animation-delay:0.5s; }
        @keyframes ringExpand { 0%{transform:scale(1);opacity:0.6;} 100%{transform:scale(1.7);opacity:0;} }
        .btn-ring svg { width:26px; height:26px; fill:rgba(168,197,160,0.85); }
        .btn-text { font-size:0.82rem; letter-spacing:4px; text-transform:uppercase; color:rgba(168,197,160,0.55); }

        /* ===== MUSIC HINT (‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏ã‡∏≠‡∏á ‡∏ö‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á) ===== */
        #music-hint {
            display: none;
            position: fixed;
            bottom: 90px; right: 14px;
            z-index: 9998;
            background: rgba(30,20,12,0.92);
            color: #f5e8d0;
            font-family: 'Cormorant Garamond', serif;
            font-size: 0.85rem;
            padding: 10px 16px 10px 14px;
            border-radius: 24px;
            border: 1px solid rgba(176,141,87,0.35);
            backdrop-filter: blur(8px);
            white-space: nowrap;
            animation: hintBounce 2s ease-in-out 3;
            pointer-events: none;
        }
        @keyframes hintBounce {
            0%,100%{transform:translateY(0);opacity:1;}
            50%{transform:translateY(-6px);opacity:0.85;}
        }
        #music-hint::after {
            content:'';
            position:absolute; right:10px; bottom:-8px;
            border:8px solid transparent;
            border-top-color:rgba(30,20,12,0.92);
        }

        /* ===== MUSIC TOGGLE BTN (‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô GitHub Pages ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà GAS) ===== */
        #music-btn {
            display: none;
            position: fixed;
            bottom: 82px; right: 18px;
            z-index: 9997;
            width: 48px; height: 48px;
            border-radius: 50%; border: none;
            cursor: pointer;
            align-items: center; justify-content: center;
            background: linear-gradient(135deg, #b08d57 0%, #d4af7a 100%);
            box-shadow: 0 4px 18px rgba(176,141,87,0.5);
            transition: all 0.3s cubic-bezier(0.34,1.4,0.64,1);
            -webkit-tap-highlight-color: transparent;
            outline: none;
            font-size: 22px;
        }
        #music-btn:hover  { transform:scale(1.12); box-shadow:0 8px 28px rgba(176,141,87,0.6); }
        #music-btn:active { transform:scale(0.92); }
        #music-btn.playing::before {
            content:''; position:absolute; inset:-6px; border-radius:50%;
            border:2px solid rgba(176,141,87,0.5); animation:musicRipple 2s ease-out infinite;
        }
        #music-btn.playing::after {
            content:''; position:absolute; inset:-14px; border-radius:50%;
            border:1.5px solid rgba(176,141,87,0.25); animation:musicRipple 2s ease-out infinite; animation-delay:0.6s;
        }
        @keyframes musicRipple { 0%{transform:scale(1);opacity:0.8;} 100%{transform:scale(1.5);opacity:0;} }
        #music-btn .icon { transition:all 0.3s ease; }
        #music-btn.playing .icon { animation:noteWiggle 1.8s ease-in-out infinite; }
        @keyframes noteWiggle { 0%,100%{transform:rotate(-8deg);} 50%{transform:rotate(8deg) scale(1.1);} }

        /* ===== SPLASH FADE OUT ===== */
        #splash.fade-out { animation:splashFade 0.8s cubic-bezier(0.4,0,0.2,1) forwards; }
        @keyframes splashFade { 0%{opacity:1;transform:scale(1);} 100%{opacity:0;transform:scale(1.06);pointer-events:none;} }

        /* ===== MAIN IFRAME ===== */
        #main-frame { position:fixed; inset:0; width:100%; height:100%; border:none; opacity:0; transition:opacity 0.6s ease; }
        #main-frame.show { opacity:1; }
    </style>
</head>
<body>

    <iframe id="main-frame" allow="autoplay; encrypted-media" allowfullscreen></iframe>

    <div id="splash">
        <div class="corner tl"></div><div class="corner tr"></div>
        <div class="corner bl"></div><div class="corner br"></div>

        <div class="leaf" style="width:14px;height:8px;left:7%;animation-duration:10s;animation-delay:0s;background:rgba(168,197,160,0.5);"></div>
        <div class="leaf" style="width:10px;height:6px;left:20%;animation-duration:13s;animation-delay:2s;background:rgba(200,230,192,0.4);"></div>
        <div class="leaf" style="width:16px;height:9px;left:60%;animation-duration:9s;animation-delay:0.5s;background:rgba(168,197,160,0.45);"></div>
        <div class="leaf" style="width:8px;height:5px;left:80%;animation-duration:12s;animation-delay:3s;background:rgba(200,230,192,0.4);"></div>
        <div class="leaf" style="width:12px;height:7px;left:45%;animation-duration:11s;animation-delay:4s;background:rgba(168,197,160,0.3);"></div>

        <div class="sparkle" style="width:4px;height:4px;top:28%;left:14%;animation-delay:0s;"></div>
        <div class="sparkle" style="width:3px;height:3px;top:33%;right:13%;animation-delay:1.2s;"></div>
        <div class="sparkle" style="width:5px;height:5px;top:65%;left:17%;animation-delay:2.1s;"></div>
        <div class="sparkle" style="width:3px;height:3px;top:60%;right:16%;animation-delay:0.8s;"></div>
        <div class="sparkle" style="width:4px;height:4px;top:20%;left:40%;animation-delay:1.7s;"></div>

        <div class="splash-content">
            <svg class="envelope-icon" viewBox="0 0 100 72" fill="none">
                <rect x="2" y="2" width="96" height="68" rx="4" fill="#eef7ea" opacity="0.9"/>
                <polygon points="2,2 98,2 50,42" fill="#cde8c5"/>
                <polygon points="2,2 2,70 42,40" fill="#a8c5a0" opacity="0.3"/>
                <polygon points="98,2 98,70 58,40" fill="#a8c5a0" opacity="0.3"/>
                <polygon points="2,70 98,70 50,32" fill="#e4f3df" opacity="0.95"/>
                <circle cx="50" cy="36" r="12" fill="#3d7050" opacity="0.9"/>
                <circle cx="50" cy="36" r="9" fill="#5a9470" opacity="0.95"/>
                <text x="50" y="40" text-anchor="middle" font-size="9" fill="rgba(232,245,228,0.9)" font-family="serif">‚úø</text>
            </svg>
            <p class="splash-eyebrow">Wedding Invitation</p>
            <h1 class="splash-names" id="splash-names">‚Äî ‚ô° ‚Äî</h1>
            <p class="splash-date" id="splash-date">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î<br>‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏û‡∏•‡∏á üéµ</p>
            <div class="splash-btn">
                <div class="btn-ring">
                    <svg viewBox="0 0 24 24"><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z"/></svg>
                </div>
                <span class="btn-text">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î</span>
            </div>
        </div>
    </div>

    <!-- Music hint tooltip -->
    <div id="music-hint">üéµ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á</div>

    <!-- Music toggle button (‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô GitHub Pages ‚Äî ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å iframe block) -->
    <button id="music-btn" onclick="toggleMusic()">
        <span class="icon" id="music-icon">üéµ</span>
    </button>

    <script>
    /* ============================================================
       CONFIG ‚Äî ‡πÅ‡∏Å‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
    ============================================================ */
    var GAS_URL      = 'https://script.google.com/macros/s/AKfycbx92GzU1TgolUBrlJLSM46sLVbT0pEHJ0kgT8ztas-HSkAVngfCr8wsbCh0IpFml3cJ/exec';
    var AUDIO_URL    = 'https://drive.google.com/uc?export=view&id=1CQqcxadNivKqeopHTt5zkzv0M7Qe-FF7'; // ‚Üê Google Drive MP3
    var COUPLE_NAME  = '';  // ‡πÄ‡∏ä‡πà‡∏ô 'Name & Name'  (‡∏ñ‡πâ‡∏≤‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏á‡∏à‡∏∞‡πÉ‡∏ä‡πâ ‚Äî ‚ô° ‚Äî)
    var WEDDING_DATE = '';  // ‡πÄ‡∏ä‡πà‡∏ô '‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå‡∏ó‡∏µ‡πà 1 ‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏° 2568'

    /* ============================================================
       INIT
    ============================================================ */
    if (COUPLE_NAME)  document.getElementById('splash-names').textContent = COUPLE_NAME;
    if (WEDDING_DATE) document.getElementById('splash-date').innerHTML = WEDDING_DATE + '<br>‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏û‡∏•‡∏á üéµ';

    var bgAudio      = null;
    var musicPlaying = false;
    var opened       = false;

    /* ============================================================
       OPEN INVITATION ‚Äî ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ï‡∏≠‡∏ô‡∏Å‡∏î splash
       ‚úÖ user gesture ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô GitHub Pages domain ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Audio
       ‚úÖ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
    ============================================================ */
    function openInvitation() {
        if (opened) return;
        opened = true;

        var splash = document.getElementById('splash');
        var frame  = document.getElementById('main-frame');
        var btn    = document.getElementById('music-btn');
        var hint   = document.getElementById('music-hint');

        // 1. ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏à‡∏≤‡∏Å gesture ‡∏ô‡∏µ‡πâ (same origin = GitHub Pages ‚úÖ)
        bgAudio = new Audio(AUDIO_URL);
        bgAudio.loop   = true;
        bgAudio.volume = 0.65;
        bgAudio.play().then(function() {
            musicPlaying = true;
            updateBtn(true);
        }).catch(function() {
            // ‡∏ñ‡πâ‡∏≤ autoplay ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô (‡∏´‡∏≤‡∏¢‡∏≤‡∏Å) ‡πÅ‡∏™‡∏î‡∏á hint ‡∏ö‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°
            updateBtn(false);
            hint.style.display = 'block';
            setTimeout(function() { hint.style.display = 'none'; }, 8000);
        });

        // 2. ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏° toggle ‡πÄ‡∏û‡∏•‡∏á
        btn.style.display = 'flex';

        // 3. ‡πÇ‡∏´‡∏•‡∏î GAS iframe
        frame.src = GAS_URL;
        frame.onload = function() {
            frame.classList.add('show');
            splash.classList.add('fade-out');
            setTimeout(function() { splash.style.display = 'none'; }, 850);
        };

        // Fallback
        setTimeout(function() {
            if (!frame.classList.contains('show')) {
                frame.classList.add('show');
                splash.classList.add('fade-out');
                setTimeout(function() { splash.style.display = 'none'; }, 850);
            }
        }, 5000);
    }

    /* ============================================================
       TOGGLE MUSIC
    ============================================================ */
    function toggleMusic() {
        if (!bgAudio) return;
        if (musicPlaying) {
            bgAudio.pause();
            musicPlaying = false;
            updateBtn(false);
        } else {
            bgAudio.play();
            musicPlaying = true;
            updateBtn(true);
        }
    }

    function updateBtn(isPlaying) {
        var btn  = document.getElementById('music-btn');
        var icon = document.getElementById('music-icon');
        if (isPlaying) {
            btn.classList.add('playing');
            icon.textContent = 'üéµ';
        } else {
            btn.classList.remove('playing');
            icon.textContent = 'üîá';
        }
    }

    /* ============================================================
       EVENTS
    ============================================================ */
    document.getElementById('splash').addEventListener('click', openInvitation);
    document.getElementById('splash').addEventListener('touchend', function(e) {
        e.preventDefault();
        openInvitation();
    }, { passive: false });
    </script>
</body>
</html>
